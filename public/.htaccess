RewriteEngine on
RewriteBase /

# Redirect non www to www
# RewriteCond %{HTTP_HOST} ^adamgraham.io
# RewriteRule (.*) http://www.adamgraham.io/$1 [R=301,L]

# Redirect www to non www
# RewriteCond %{HTTP_HOST} ^www.adamgraham.io
# RewriteRule (.*) http://adamgraham.io/$1 [R=301,L]

# Redirect http to https
RewriteCond %{HTTPS} !=on
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301,NE]
Header always set Content-Security-Policy "upgrade-insecure-requests;"

# Redirect all file requests to index.html (SPA)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.*) index.html [QSA,L]
